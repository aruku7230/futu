{{- define "title" }}{{ i18n "archive" }} | {{ .Site.Title }}{{ end -}}
{{- define "main" }}
  <header>
    <h1>{{ i18n "archive" }}</h1>
    <span>{{ i18n "archiveCounter" (len .Data.Pages) }}</span>
  </header>
  {{- $paginator := .Paginate .Data.Pages.ByDate.Reverse
    .Site.Params.archivePaginate
  }}
  {{- range $index, $element := $paginator.Pages -}}
    {{- $thisYear
      := $element.Date.Format "2006"
    }}
    {{- $lastElement := $index | add -1 | index
      $paginator.Pages
    }}
    {{- if or (eq $index 0) ( ne ($lastElement.Date.Format
      "2006") $thisYear )
    }}
      <h2>{{ $thisYear }}</h2>
    {{- end }}
    <p>
      <a href="{{ $element.RelPermalink }}">
        {{ .Title }}
      </a>
      <span>{{ $element.Date.Format "01/02" }}</span>
    </p>
  {{- end -}}
  <!-- pagination -->
  {{ if or $paginator.Prev $paginator.Next }}
    <footer>
      <nav style="display: flex;justify-content: space-between;">
        {{ with $paginator.Prev -}}
          <a href="{{ .URL }}">← {{ i18n "prevPage" }}</a>
        {{ else }}
          {{ i18n "prevPage" }}
        {{- end }}
        {{ with $paginator.Next -}}
          <a href="{{ .URL }}"> {{ i18n "nextPage" }} → </a>
        {{ else }}
          {{ i18n "nextPage" }}
        {{- end }}
      </nav>
    </footer>
  {{ end }}
{{- end }}
